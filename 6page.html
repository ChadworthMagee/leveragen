<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Antibody Database Comparison</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Slate & Sky -->
    <!-- Application Structure Plan: The SPA is designed as an interactive dashboard. The structure is thematic, starting with a high-level summary (key stats), followed by interactive controls (search/filters), a visual comparison (chart), and finally a detailed, sortable table. This top-down approach allows users to get a quick overview and then drill down into specifics. This structure was chosen for usability, guiding the user from a broad understanding to detailed exploration, which is more intuitive than mirroring a static report. User flow: Overview -> Filter -> Visualize -> Detailed Comparison. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Database list and characteristics.
        - Goal: Compare, Organize, Inform.
        - Viz/Presentation Method: 
            1. Key Stats Cards: Goal=Inform. Quick numerical highlights (total DBs). Method=HTML/CSS.
            2. Bar Chart (Chart.js): Goal=Compare. Visually represents the scale (number of entries) of each database. Interaction=Tooltips on hover provide exact numbers. Justification=Bar charts are excellent for comparing quantities across categories. Library=Chart.js on Canvas.
            3. Interactive Table: Goal=Organize/Compare. Presents detailed, multi-faceted information. Interaction=Search, filtering by focus, and sorting by column. Justification=A table is the most effective way to present structured, detailed data for comparison. Method=HTML/CSS + JS for dynamic updates.
        - All choices support the dashboard structure by providing layers of information, from visual summaries to granular details. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* slate-50 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 1200px;
            margin-left: auto;
            margin-right: auto;
            height: 400px;
            max-height: 50vh;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 500px;
            }
        }
        .table-container {
            overflow-x: auto;
            -webkit-overflow-scrolling: touch;
        }
        th {
            cursor: pointer;
        }
        .sort-indicator {
            display: inline-block;
            margin-left: 5px;
            opacity: 0.5;
        }
    </style>
</head>
<body class="text-slate-800">

    <div class="container mx-auto p-4 md:p-8">
        
        <header class="text-center mb-8">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-900">Antibody Database Explorer</h1>
            <p class="mt-2 text-lg text-slate-600">An interactive guide to prominent antibody databases for research.</p>
        </header>

        <main>
            <!-- Stats -->
            <section id="stats" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-8">
                 <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200 flex flex-col justify-center items-center">
                    <h3 class="text-2xl font-bold text-sky-600" id="total-dbs">0</h3>
                    <p class="text-slate-500 mt-1">Databases Compared</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200 flex flex-col justify-center items-center">
                    <h3 class="text-2xl font-bold text-sky-600" id="total-sequences">0+</h3>
                    <p class="text-slate-500 mt-1">Total Entries Indexed</p>
                </div>
                <div class="bg-white p-6 rounded-lg shadow-md border border-slate-200 flex flex-col justify-center items-center">
                    <h3 class="text-2xl font-bold text-sky-600" id="focus-areas">0</h3>
                    <p class="text-slate-500 mt-1">Primary Focus Areas</p>
                </div>
            </section>

            <!-- Controls -->
            <section class="bg-white p-6 rounded-lg shadow-md border border-slate-200 mb-8">
                <h2 class="text-xl font-semibold text-slate-800 mb-4">Filter & Search</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div class="md:col-span-2">
                        <label for="search-input" class="sr-only">Search Databases</label>
                        <input type="text" id="search-input" placeholder="Search by name, focus, or keyword..." class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition">
                    </div>
                    <div>
                        <label for="focus-filter" class="sr-only">Filter by Focus</label>
                        <select id="focus-filter" class="w-full px-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-sky-500 focus:border-sky-500 transition bg-white">
                            <option value="all">All Focus Areas</option>
                        </select>
                    </div>
                </div>
            </section>
            
            <!-- Chart -->
            <section class="bg-white p-6 rounded-lg shadow-md border border-slate-200 mb-8">
                <h2 class="text-xl font-semibold text-slate-800 mb-1">Database Scale Comparison (Number of Entries)</h2>
                 <p class="text-sm text-slate-500 mb-4">Comparison of database size based on available entry counts. Note: 'Entries' can refer to sequences, structures, or registered antibodies.</p>
                <div class="chart-container">
                    <canvas id="dbChart"></canvas>
                </div>
            </section>

            <!-- Table -->
            <section class="bg-white p-6 rounded-lg shadow-md border border-slate-200">
                 <h2 class="text-xl font-semibold text-slate-800 mb-4">Detailed Database Comparison</h2>
                 <div class="table-container">
                    <table class="w-full text-sm text-left text-slate-500">
                        <thead class="text-xs text-slate-700 uppercase bg-slate-100">
                            <tr>
                                <th scope="col" class="px-6 py-3" data-sort="name">Database <span class="sort-indicator"></span></th>
                                <th scope="col" class="px-6 py-3" data-sort="mainFocus">Main Focus <span class="sort-indicator"></span></th>
                                <th scope="col" class="px-6 py-3" data-sort="dataSource">Data Sources <span class="sort-indicator"></span></th>
                                <th scope="col" class="px-6 py-3" data-sort="dataSize">Data Size / Content <span class="sort-indicator"></span></th>
                                <th scope="col" class="px-6 py-3">Key Features</th>
                                <th scope="col" class="px-6 py-3" data-sort="updateFrequency">Update <span class="sort-indicator"></span></th>
                            </tr>
                        </thead>
                        <tbody id="db-table-body">
                            <!-- JS will populate this -->
                        </tbody>
                    </table>
                </div>
            </section>

        </main>
    </div>

        <script>
        const dbData = [
            {
                name: 'OAS',
                link: 'https://opig.stats.ox.ac.uk/webapps/oas',
                mainFocus: 'Sequence',
                dataSource: 'Immune Repertoires from >80 studies',
                dataSize: '>1 billion sequences',
                features: 'Collects, annotates, and cleans immune repertoires. Both paired and unpaired sequences. Searchable by chain, species, disease.',
                updateFrequency: 'Regularly',
                entries: 1000000000
            },
            {
                name: 'Yabs',
                link: 'https://db.antibodysociety.org/',
                mainFocus: 'Therapeutic',
                dataSource: 'Manual curation, clinical trial data',
                dataSize: 'Antibodies approved or in clinical trials since 2000',
                features: 'Detailed info on type, target, developer, trial dates. Comprehensive search/filter tools.',
                updateFrequency: 'Bimonthly',
                entries: 800 
            },
            {
                name: 'DOTAD',
                link: 'https://i.uestc.edu.cn/DOTAD/',
                mainFocus: 'Therapeutic',
                dataSource: 'Literature, other databases',
                dataSize: '~10,000 sequences, ~3,500 experimental data points',
                features: 'Focus on therapeutic antibody developability. Includes experimental physicochemical data.',
                updateFrequency: 'As of Dec 2023',
                entries: 10000
            },
            {
                name: 'NaturalAntibody',
                link: 'https://www.naturalantibody.com/antibody-database/',
                mainFocus: 'Sequence',
                dataSource: 'Patents, PDB, INNs, GenBank, NGS, Literature',
                dataSize: '~3.5M patent sequences, >826 therapeutics, >6.5k structures',
                features: 'Comprehensive, curated database integrating multiple sources. Antibody-specific searches.',
                updateFrequency: 'Ongoing',
                entries: 3500000
            },
            {
                name: 'IMGT',
                link: 'https://www.imgt.org/',
                mainFocus: 'Sequence/Structure',
                dataSource: 'GenBank, EMBL, DDBJ, PDB',
                dataSize: 'High-quality integrated immunogenetics information system',
                features: 'Specialized in immunoglobulins (IG), T cell receptors (TR). Expert annotation. IMGT/mAb-DB for therapeutic mAbs.',
                updateFrequency: 'Regularly',
                entries: 500000 
            },
            {
                name: 'abYsis',
                link: 'http://www.abysis.org/abysis/',
                mainFocus: 'Sequence/Structure',
                dataSource: 'EMBL-ENA, Kabat, PDB',
                dataSize: '>122,000 numbered sequences (as of 2015)',
                features: 'Integrated sequence/structure analysis. Automatic numbering (Kabat, Chothia), annotation of CDRs, highlights unusual residues.',
                updateFrequency: 'Last major update seems ~2015',
                entries: 122000
            },
            {
                name: 'ABSD',
                link: 'https://absd.pasteur.cloud/',
                mainFocus: 'Sequence',
                dataSource: 'PDB, GenBank, IMGT, UniProt, OAS, and others',
                dataSize: 'Consolidated dataset from multiple sources',
                features: 'Aims to consolidate sequences into a unified, clean dataset, resolving redundancies and missing pairing info.',
                updateFrequency: 'June 2025',
                entries: 200000
            },
            {
                name: 'abYbank',
                link: 'http://www.abybank.org/',
                mainFocus: 'Structure',
                dataSource: 'PDB',
                dataSize: 'Database of PDB-derived antibody structures',
                features: 'Processes PDB files to identify chains, associates with antigens. Downloadable datasets of antibody-antigen complexes.',
                updateFrequency: 'Older',
                entries: 10000
            },
            {
                name: 'Antibody Registry',
                link: 'https://www.antibodyregistry.org/',
                mainFocus: 'Reagent',
                dataSource: 'User submissions, vendor catalogs',
                dataSize: 'Most comprehensive listing of persistently identified antibody reagents',
                features: 'Assigns unique, persistent identifiers (RRIDs) for citing antibodies in publications. Tracks provenance.',
                updateFrequency: 'Continuously',
                entries: 2500000
            },
            {
                name: 'CiteAb',
                link: 'https://www.citeab.com/',
                mainFocus: 'Reagent',
                dataSource: 'Peer-reviewed publications, vendor datasheets',
                dataSize: '>14 million reagents, >306,000 antibody citations',
                features: 'Ranks antibodies by number of citations in publications. Helps find successfully used and validated antibodies.',
                updateFrequency: 'Continuously',
                entries: 14000000
            },
            {
                name: 'AACDB',
                link: 'https://i.uestc.edu.cn/AACDB/index.html',
                mainFocus: 'Structure',
                dataSource: 'PDB, manual verification from literature',
                dataSize: '7,498 manually processed antigen-antibody complexes',
                features: 'Focus on antibody-antigen complexes. Detailed paratope/epitope info. Corrects PDB annotation errors.',
                updateFrequency: 'May 2024',
                entries: 7498
            },
            {
                name: 'Antibodypedia',
                link: 'https://www.antibodypedia.com/',
                mainFocus: 'Reagent',
                dataSource: 'Commercial and academic vendors',
                dataSize: '>4 million research antibodies for >19,000 human proteins',
                features: 'Scores antibodies based on validation principles. Search for validated antibodies for specific applications.',
                updateFrequency: 'Ongoing',
                entries: 4000000
            }
        ];
        
        let chartInstance;
        let currentSort = { column: 'name', direction: 'asc' };

        document.addEventListener('DOMContentLoaded', () => {
            populateFilters();
            renderStats(dbData);
            renderTable(dbData);
            renderChart(dbData);
            
            document.getElementById('search-input').addEventListener('input', handleFilterChange);
            document.getElementById('focus-filter').addEventListener('change', handleFilterChange);
            document.querySelectorAll('th[data-sort]').forEach(th => {
                th.addEventListener('click', () => {
                    const column = th.dataset.sort;
                    if (currentSort.column === column) {
                        currentSort.direction = currentSort.direction === 'asc' ? 'desc' : 'asc';
                    } else {
                        currentSort.column = column;
                        currentSort.direction = 'asc';
                    }
                    updateSortIndicators();
                    handleFilterChange();
                });
            });
            updateSortIndicators();
        });

        function populateFilters() {
            const focusFilter = document.getElementById('focus-filter');
            const focusAreas = [...new Set(dbData.map(db => db.mainFocus))];
            focusAreas.sort().forEach(focus => {
                const option = document.createElement('option');
                option.value = focus;
                option.textContent = focus;
                focusFilter.appendChild(option);
            });
        }
        
        function renderStats(data) {
            document.getElementById('total-dbs').textContent = data.length;
            const totalEntries = dbData.reduce((acc, db) => acc + (db.entries || 0), 0);
            
            let formattedTotal;
            if (totalEntries >= 1000000000) {
                formattedTotal = (totalEntries / 1000000000).toFixed(2) + 'B+';
            } else if (totalEntries >= 1000000) {
                formattedTotal = (totalEntries / 1000000).toFixed(1) + 'M+';
            } else {
                formattedTotal = totalEntries.toLocaleString();
            }

            document.getElementById('total-sequences').textContent = formattedTotal;
            const focusAreas = new Set(dbData.map(db => db.mainFocus));
            document.getElementById('focus-areas').textContent = focusAreas.size;
        }

        function handleFilterChange() {
            const searchTerm = document.getElementById('search-input').value.toLowerCase();
            const focus = document.getElementById('focus-filter').value;
            
            let filteredData = dbData.filter(db => {
                const matchesSearch = searchTerm === '' || 
                    db.name.toLowerCase().includes(searchTerm) ||
                    db.mainFocus.toLowerCase().includes(searchTerm) ||
                    db.features.toLowerCase().includes(searchTerm) ||
                    db.dataSource.toLowerCase().includes(searchTerm);
                
                const matchesFocus = focus === 'all' || db.mainFocus === focus;

                return matchesSearch && matchesFocus;
            });

            sortData(filteredData);
            renderTable(filteredData);
            renderChart(filteredData);
        }

        function sortData(data) {
            data.sort((a, b) => {
                const valA = a[currentSort.column];
                const valB = b[currentSort.column];
                
                let comparison = 0;
                if (typeof valA === 'number' && typeof valB === 'number') {
                    comparison = valA - valB;
                } else {
                    comparison = valA.toString().localeCompare(valB.toString());
                }

                return currentSort.direction === 'asc' ? comparison : -comparison;
            });
        }

        function updateSortIndicators() {
            document.querySelectorAll('th[data-sort]').forEach(th => {
                const indicator = th.querySelector('.sort-indicator');
                if (th.dataset.sort === currentSort.column) {
                    indicator.textContent = currentSort.direction === 'asc' ? '▲' : '▼';
                    indicator.style.opacity = '1';
                } else {
                    indicator.textContent = '▲▼';
                    indicator.style.opacity = '0.3';
                }
            });
        }

        function renderTable(data) {
            const tableBody = document.getElementById('db-table-body');
            tableBody.innerHTML = '';
            
            if (data.length === 0) {
                tableBody.innerHTML = `<tr><td colspan="6" class="text-center py-8 px-6">No databases found matching your criteria.</td></tr>`;
                return;
            }

            data.forEach(db => {
                const row = document.createElement('tr');
                row.className = 'bg-white border-b hover:bg-slate-50';
                row.innerHTML = `
                    <td class="px-6 py-4 font-medium text-slate-900 whitespace-nowrap">
                        <a href="${db.link}" target="_blank" rel="noopener noreferrer" class="text-sky-600 hover:underline">${db.name}</a>
                    </td>
                    <td class="px-6 py-4">
                        <span class="px-2 py-1 text-xs font-medium rounded-full ${getFocusColor(db.mainFocus)}">
                            ${db.mainFocus}
                        </span>
                    </td>
                    <td class="px-6 py-4">${db.dataSource}</td>
                    <td class="px-6 py-4">${db.dataSize}</td>
                    <td class="px-6 py-4">${db.features}</td>
                    <td class="px-6 py-4">${db.updateFrequency}</td>
                `;
                tableBody.appendChild(row);
            });
        }
        
        function getFocusColor(focus) {
            switch(focus) {
                case 'Sequence': return 'bg-sky-100 text-sky-800';
                case 'Therapeutic': return 'bg-emerald-100 text-emerald-800';
                case 'Structure': return 'bg-amber-100 text-amber-800';
                case 'Reagent': return 'bg-violet-100 text-violet-800';
                default: return 'bg-slate-100 text-slate-800';
            }
        }

        function renderChart(data) {
            const ctx = document.getElementById('dbChart').getContext('2d');
            
            const chartData = data
                .filter(d => d.entries > 0)
                .sort((a, b) => b.entries - a.entries)
                .slice(0, 15);

            const labels = chartData.map(db => db.name);
            const values = chartData.map(db => db.entries);

            if (chartInstance) {
                chartInstance.destroy();
            }

            chartInstance = new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Number of Entries (Log Scale)',
                        data: values,
                        backgroundColor: 'rgba(56, 189, 248, 0.6)', // sky-400
                        borderColor: 'rgba(14, 165, 233, 1)', // sky-500
                        borderWidth: 1
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    indexAxis: 'y',
                    scales: {
                        x: {
                            type: 'logarithmic',
                            title: {
                                display: true,
                                text: 'Number of Entries (Logarithmic Scale)'
                            }
                        },
                        y: {
                            beginAtZero: true
                        }
                    },
                    plugins: {
                        legend: {
                            display: false
                        },
                        tooltip: {
                             callbacks: {
                                label: function(context) {
                                    let label = context.dataset.label || '';
                                    if (label) {
                                        label += ': ';
                                    }
                                    if (context.parsed.x !== null) {
                                        label += context.parsed.x.toLocaleString();
                                    }
                                    return label;
                                }
                            }
                        }
                    }
                }
            });
        }
    </script>
</body>
</html>